{% extends "admin-layout.twig" %}
{% import '@Theme/macros/iconSpacer.twig' as spacer %}

{% block additionalcss %}
    <link rel="stylesheet" href="{{ template_resource_path }}/css/admin-applications.css" />
{% endblock %}

{% block header %}
    <div class="mdl-layout__header-row">
        <button class="mdl-button mdl-js-button mdl-button--icon" onclick="location.href='{{ application_base_uri }}'">
            <i class="material-icons">keyboard_arrow_left</i>
        </button>
        <span class="mdl-layout-title">Applications</span>
    </div>
{% endblock %}

{% block menuapp %}<a class="mdl-navigation__link mdl-navigation__link--current" href="applications"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">apps</i>Applications</a>{% endblock %}

{% block content %}
    <div class="mdl-grid">
        <div class="icon-box mdl-cell mdl-cell--12-col">
            {% for applicationEntity in applications %}
                {% set favicon = '/data/upload/favicons/' ~ applicationEntity.name ~ '.png' %}
                {% if not defined(document_root ~ favicon) %}
                    {% if applicationEntity.name == 'admin' %}
                        {% set favicon = template_resource_path ~ '/img/icons/favicon-admin.svg' %}
                    {% elseif applicationEntity.name == 'website' %}
                        {% set favicon = template_resource_path ~ '/img/icons/favicon-website.svg' %}
                    {% else %}
                        {% set favicon = template_resource_path ~ '/img/icons/favicon-default.svg' %}
                    {% endif %}
                {% endif %}
            <a id="icon_{{ applicationEntity.name }}" href="applications/view/{{ applicationEntity.name }}" class="icon {{ applicationEntity.name }}{% if applicationEntity.is_enabled == 0 %} hidden{% endif %}">
                <span class="icon-avatar">
                    <img src="{{ favicon }}" alt="{{ applicationEntity.title }}">
                </span>
                <span class="icon-label">{{ applicationEntity.title }}</span>
            </a>
            <div class="mdl-tooltip" for="icon_{{ applicationEntity.name }}">
                {{ applicationEntity.description }}
            </div>
            {% endfor %}

            {{ spacer.renderIconSpacer(8) }}
        </div>

        <div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
            <div class="dump">
                {{ dump(applications) }}
            </div>
        </div>

        <button class="add-item mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="location.href='applications/add'">
            <i class="material-icons">add</i>
        </button>
    </div>
{% endblock %}
