<!DOCTYPE html>
<html lang="en">
    <head>
        <base href="{% if application.baseUri != '/' %}{{ application.baseUri }}{% endif %}/" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">
        <title>{% block title %}{{ site_title|default('Thomas Admin') }}{% endblock %}</title>

        <!-- Add to homescreen for Chrome on Android -->
        <meta name="mobile-web-app-capable" content="yes">
        <link rel="icon" sizes="192x192" href="{{ application.resourcePath }}/img/android-desktop.png">

        <!-- Add to homescreen for Safari on iOS -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="Material Design Lite">
        <link rel="apple-touch-icon-precomposed" href="{{ application.resourcePath }}/img/ios-desktop.png">

        <!-- Tile icon for Win8 (144x144 + tile color) -->
        <meta name="msapplication-TileImage" content="{{ application.resourcePath }}/img/ms-touch-icon-144x144-precomposed.png">
        <meta name="msapplication-TileColor" content="#3372DF">

        <link rel="shortcut icon" href="{{ application.resourcePath }}/img/favicon.png">

        <link rel="stylesheet" href="{{ application.resourcePath }}/css/material.design.lite/material.min.css" />
        <link rel="stylesheet" href="{{ application.resourcePath }}/css/material.design.lite/material.font.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
        <link rel="stylesheet" href="{{ application.resourcePath }}/css/material.design.lite/material.components.ext.min.css" />
        <link rel="stylesheet" href="{{ application.resourcePath }}/css/material.design.lite/material.color.theme.blue-grey-red.min.css" />
        {% block additionalcss %}
            {# add or include <link rel="stylesheet"> or <style> elements. #}
        {% endblock %}
        <link rel="stylesheet" href="{{ application.resourcePath }}/css/admin.css" />
    </head>
    <body>
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
            <header class="mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600">
                {% block header %}
                    <div class="mdl-layout__header-row">
                        <span class="mdl-layout-title">Dashboard</span>
                    </div>
                {% endblock %}
            </header>
            <div class="mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50">
                <header>
                    {% if authenticated_user_meta.avatar is empty %}
                        {% set avatar =  application.resourcePath ~ '/img/avatars/a_man.svg' %}
                    {% else %}
                        {% if authenticated_user_meta.avatar_type == 'file' %}
                            {% set avatar =  application.resourcePath ~ authenticated_user_meta.avatar %}
                        {% else %}
                            {% set avatar = authenticated_user_meta.avatar %}
                        {% endif %}
                    {% endif %}
                    <div class="avatar-image">
                        <img src="{{ avatar }}">
                    </div>
                    <div class="avatar-meta">
                        {% if authenticated_user_meta.display_name is defined %}
                            {% set displayName = authenticated_user_meta.display_name %}
                        {% else %}
                            {% set displayName = authenticated_user.getUserName() %}
                        {% endif %}
                        <span>{{ displayName }}</span>
                        <div class="mdl-layout-spacer"></div>
                    </div>
                </header>

                <nav class="mdl-navigation mdl-color--blue-grey-800">
                {% block menudash %}
                    {% if isAllowed('admin-dashboard') %}
                    <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">home</i>Dashboard</a>
                    {% endif %}
                {% endblock %}

                {% block menuapp %}
                    {% if isAllowed('admin-applications-list') %}
                    <a class="mdl-navigation__link" href="applications"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">apps</i>Applications</a>
                    {% endif %}
                {% endblock %}

                {% block menucontrol %}
                    {% if isAllowed('admin-controlpanel-index') %}
                    <a class="mdl-navigation__link" href="control-panel"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">tune</i>Control Panel</a>
                    {% endif %}
                {% endblock %}

                {% block menuabout %}
                    <a class="mdl-navigation__link" href="about"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">info_outline</i>About</a>
                {% endblock %}

                    <a class="mdl-navigation__link" href="auth/logout"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">exit_to_app</i>Logout</a>
                    <div class="mdl-layout-spacer"></div>
                    <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">help_outline</i><span class="visuallyhidden">Help</span></a>
                </nav>
            </div>
            <main class="mdl-layout__content mdl-color--grey-100">
                <div class="content">
                    {% block content %}
                        {# extend this block in templates. #}
                    {% endblock %}
                </div>
            </main>
        </div>
        <footer class="stat">
            {% set stat = getStat() %}
            Rendered in {{ stat.duration }} seconds. Memory usage: {{ stat.memory }}.
        </footer>

        {% block dialog %}
            {# add or include <dialog> elements. #}
        {% endblock %}
        <script type="application/javascript" src="{{ application.resourcePath }}/js/material.design.lite/material.min.js"></script>
        <script type="application/javascript" src="{{ application.resourcePath }}/js/material.design.lite/mdl-selectfield.min.js"></script>
        <script type="application/javascript" src="{{ application.resourcePath }}/js/material.design.lite/material.components.ext.min.js"></script>
        <script type="application/javascript" src="{{ application.resourcePath }}/js/library/dialog-polyfill.min.js"></script>
        <script type="application/javascript" src="{{ application.resourcePath }}/js/Thomas.js"></script>
        {% block additionaljs %}
            {# add or include <script> elements. #}
        {% endblock %}
    </body>
</html>
