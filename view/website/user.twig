{##
 # Thomas theme for WebHemi
 #
 # @copyright 2012 - 2017 Gixx-web (http://www.gixx-web.com)
 # @license   https://opensource.org/licenses/MIT The MIT License (MIT)
 # @link      http://www.gixx-web.com
 #}
<!DOCTYPE html>
<html lang="{{ application.language|default('en') }}">
    <head>
        <base href="{%  if application.baseUri != '/' %}{{ application.baseUri }}{% endif %}/" />
        <title>{{ user.meta.displayName|default(user.userName) }} - Thomas von Fürstenfeld</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0" />
        <meta name="language" content="{{ application.language|default('en') }}" />
        <meta name='robots' content='index,follow' />
        <meta name="theme-color" content="#3B5999">
        <meta name="copyright" content="{{ application.copyright|default('') }}">
        {# add or include <link> or <style> or <meta> elements. #}
        <meta name="description" content="{{ application.description }}" />
        <meta name="subject" content="{{ application.subject }}" />
        <meta name="keywords" content="{{ application.keywords }}" />
        <!-- facebook share -->
        <meta property="og:locale" content="{{ application.locale|default('en_GB') }}" />
        <meta property="og:site_name" content="Thomas von Fürstenfeld" />
        <meta property="og:title" content="{% if page.type is not empty %}{{ page.type|t }}: {% endif %}{% if page.title is not empty %}{{ page.title }} - {% endif %}Thomas von Fürstenfeld" />
        <meta property="og:type" content="article"/>
        <meta property="og:description" content="{{ application.description }}"/>
        <meta property="og:url" content="{{ application.address }}" />
        <!-- twitter share -->
        <meta name="twitter:title" content="{% if page.type is not empty %}{{ page.type|t }}: {% endif %}{% if page.title is not empty %}{{ page.title }} - {% endif %}Thomas von Fürstenfeld" />
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:description" content="{{ application.description }}" />
        <link rel=”me” type="text/html" href=”{{ application.authorLink|default('') }}” />
        <link rel="apple-touch-icon" sizes="57x57" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="{{ application.resourcePath }}/img/icons/thomas/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="{{ application.resourcePath }}/img/icons/thomas/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="{{ application.resourcePath }}/img/icons/thomas/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="{{ application.resourcePath }}/img/icons/thomas/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="{{ application.resourcePath }}/img/icons/thomas/favicon-16x16.png">
        <link rel="manifest" href="{{ application.resourcePath }}/img/icons/thomas/manifest.json">
        <meta name="msapplication-config" content="{{ application.resourcePath }}/img/icons/thomas/browserconfig.xml" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i|Libre+Baskerville:400,700|Roboto+Mono:300,400,700" />
        <link rel="stylesheet" href="{{ application.resourcePath }}/css/site.css" />
        <link rel="stylesheet" href="{{ application.resourcePath }}/css/library/emojione.min.css" />
        <link rel="stylesheet" href="{{ application.resourcePath }}/css/library/highlight.github.css" />
        <script type="application/javascript">
            if (!(window.CSS && window.CSS.supports && window.CSS.supports('--fake-var', 0))) {
                {% if defined('@Theme/error/not-supported-' ~ application.language ~ '.html') %}
                {% set notSupportedLink = application.resourcePath|replace({'static' : 'view'}) ~ '/error/not-supported-' ~ application.language ~ '.html'  %}
                {% else %}
                {% set notSupportedLink = application.resourcePath|replace({'static' : 'view'}) ~ '/error/not-supported-en.html'  %}
                {% endif %}
                location.href = '{{ notSupportedLink }}';
            }
        </script>
        <style type="text/css">
            body > div.cover { background-image: url("{{ user.meta.coverImage|default('') }}"); }
        </style>
    </head>
    <body class="user-list">
        <header>
            <div class="container">
                <a href="#" class="nav material-icons">menu</a>
                <h1><a href="" class="thomas">Thomas von Fürstenfeld</a> - {{ user.meta.displayName|default(user.userName) }}</h1>
            </div>
        </header>

        <div class="cover">
            {% set avatar = user.meta.avatar %}
            {% if avatar is empty %}
                {% set avatar =  application.resourcePath ~ '/img/avatars/a_man.svg' %}
            {% endif %}
            <img src="{{ avatar }}" alt="{{ user.meta.displayName|default(user.meta.userName) }}">
            <h1>{{ user.meta.displayName|default(user.meta.userName) }}</h1>
            <div class="navbar"></div>
        </div>

        <nav>
            <div class="info">
                <article>
                    {% if user.meta.introduction is not empty %}
                    <h4>{{ 'Introduction'|t }}</h4>
                    {{ user.meta.introduction|markdown }}
                    {% endif %}

                    {#{{ dump(user) }}#}
                </article>
            </div>

            <div class="container">
                <section>
                    <ul>
                        <li><a class="home" href="">{{ 'News Feed'|t }}</a></li>
                        <li><a class="user current" href="{{ '#Url#'|tagParser }}">{{ 'User'|t }}</a></li>
                    </ul>
                </section>

                <section>
                    <h2>{{ 'Categories'|t }}</h2>
                    <ul>
                        {% for category in getCategories() %}
                            <li><a class="category category-{{ category.name }}{% if 'Categories' == page.type|default('') and activeMenu == category.name %} current{% endif %}" href="{{ category.path }}/{{ category.name }}/index.html">{{ category.title }}</a></li>
                        {% endfor %}
                    </ul>
                </section>

                {% set tags = getTags() %}
                {% if tags is not empty %}
                    <section>
                        <h2>{{ "Tags"|t }}</h2>
                        <ul>
                            {% for tag in tags %}
                                <li><a class="tag tag-{{ tag.name }}{% if 'Tags' == page.type|default('') and activeMenu == tag.name %} current{% endif %}" href="{{ tag.path }}/{{ tag.name }}/index.html">{{ tag.title }}</a></li>
                            {% endfor %}
                        </ul>
                    </section>
                {% endif %}

                {% set dates = getDates() %}
                {% if dates is not empty %}
                    <section>
                        <h2>{{ 'Archive'|t }}</h2>
                        <ul>
                            {% for date in dates %}
                                <li><a class="date date-{{ date.name }}{% if 'Archive' == page.type|default('') and activeMenu == date.name %} current{% endif %}" href="{{ date.path }}/{{ date.name }}/index.html">{{ date.dateTime.format('Y4B') }}</a></li>
                            {% endfor %}
                        </ul>
                    </section>
                {% endif %}
            </div>
        </nav>

        <main>
            <section class="list">
                {% for blogPost in blogPosts %}
                    <article>
                        <header>
                            {% set avatar = blogPost.author.meta.avatar %}
                            {% if avatar is empty %}
                                {% set avatar =  application.resourcePath ~ '/img/avatars/a_man.svg' %}
                            {% endif %}
                            <a class="avatar" href="{{ blogPost.author.url }}/index.html" alt="{{ blogPost.author.meta.displayName|default(blogPost.author.userName) }}"><img src="{{ avatar }}"></a>
                            <p class="meta">

                                {% set authorLink = '<a href="' ~ blogPost.author.url ~ '/index.html" alt="' ~ blogPost.author.meta.displayName|default(blogPost.author.userName) ~ '">' ~ blogPost.author.meta.displayName|default(blogPost.author.userName) ~ '</a>' %}
                                <span class="user">{{ 'Author: %s'|t(authorLink)|raw }}</span>

                                {% if blogPost.meta.authorMoodKey is not empty %}
                                    <span class="mood">:{{ blogPost.meta.authorMoodKey }}: {{ blogPost.meta.authorMoodName|t }}</span>
                                {% endif %}
                                <br>

                                {% if blogPost.publishedAt.isToday() %}
                                    {% set publishDate = 'Today'|t ~ ', ' ~ blogPost.publishedAt.format('T') %}
                                {% elseif blogPost.publishedAt.isCurrentYear() %}
                                    {% set publishDate = blogPost.publishedAt.format('BDT') %}
                                {% else %}
                                    {% set publishDate = blogPost.publishedAt.format('Y4BDT') %}
                                {% endif %}
                                <span class="date">{{ 'Published at: %s'|t(publishDate)|raw }},</span>

                                {% if blogPost.meta.location is not empty %}
                                    <span class="location">{{ 'In the area of %s'|t(blogPost.meta.location)|raw }}</span>
                                {% endif %}
                                <br>

                                <span class="category">
                                    {% set categoryLink = '<a href="' ~ blogPost.category.url ~'/index.html">' ~ blogPost.category.title ~ '</a>' %}
                                    {{ 'In category of %s'|t(categoryLink)|raw }}
                                    </span>

                                {% if blogPost.tags|length > 0 %}
                                    {% set tagList = '' %}
                                    <span class="taglist">,
                                        {% for tag in blogPost.tags %}
                                            {% set tagList = tagList ~ '<a href="' ~ tag.url ~ '/index.html">#' ~ tag.title ~ '</a> ' %}
                                        {% endfor %}
                                        {{ 'with tags: %s'|t(tagList)|raw }}
                                    </span>
                                {% endif %}
                            </p>
                        </header>

                        {% if blogPost.summary is not empty %}
                            <p class="summary">{{ blogPost.summary }}</p>
                        {% endif %}

                        <div class="preview">
                            {% if blogPost.meta.illustration is not empty %}
                                <a href="{{ blogPost.path }}"><img src="{{ application.resourcePath }}/img/post-illustration-placeholder.jpg" data-src="{{ blogPost.meta.illustration }}"  title="{{ blogPost.title }}"></a>
                            {% endif %}
                            <h1><a href="{{ blogPost.path }}" title="{{ blogPost.title }}">{{ blogPost.title }}</a></h1>
                            <p>{{ blogPost.contentLead }}</p>
                        </div>

                        <a class="more" href="{{ blogPost.path }}">{{ 'Read more...'|t }}</a>
                    </article>
                {% endfor %}
            </section>
        </main>

        <footer>
            <div class="container">
                {% set year = 'now'|date('Y') %}
                <p>{{ 'Copyright &copy; %d. All rights reserved.'|t(year)|raw }} Thomas von Fürstenfeld.</p>
            </div>
        </footer>

        <script type="application/javascript" src="{{ application.resourcePath }}/js/library/stickyfill.min.js"></script>
        <script type="application/javascript" src="{{ application.resourcePath }}/js/library/emojione.min.js"></script>
        <script type="application/javascript" src="{{ application.resourcePath }}/js/library/highlight.pack.js"></script>
        <script type="application/javascript" src="{{ application.resourcePath }}/js/Thomas.js"></script>
        <script type="application/javascript" src="{{ application.resourcePath }}/js/site.js"></script>
    </body>
</html>
